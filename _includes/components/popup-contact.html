<!-- Contact Modal -->
<div id="contact--modal" class="modal">
  <div class="modal-content ">
  <div class="color-bar"></div>
  <span class="close hairline" data-modal="contact--modal"></span>
  <div class="col-10 md-col-8 lg-col-6 center mx-auto content-wrap">
      <div class="xs-hide">
          {% include /svg/ATI_b.svg %}
      </div>
      <h1>Contact the Chief</h1>
      <p class="xs-hide">Questions? We might have answers. Fill in yours here.</p>

        <form id="myForm">
            <input id="form-name" type="text" name="Name" placeholder="Name" required>
            <input id="form-email" type="email" name="Email" placeholder="Email" required>
            <textarea id="form-message" name="Message" cols="30" rows="6" placeholder="Message" required></textarea>
            <!-- CONFIG -->
            <input class="hidden" type="text" name="_gotcha">
            <input type="hidden" name="_subject" value="Subject">
            <input type="hidden" name="_cc" value="email@cc.com">
            <!-- /CONFIG -->
            <input type="submit" value="Submit" id="Form-submit" class="btn-prime"/>
        </form>
  </div>
  </div>
</div>

<!-- Return Modal -->
<div id="return--modal" class="modal">
    <span class="close hairline" data-modal="return--modal"></span>
    <div class="modal-content">
        <div class="max-width-3 mx-auto relative">
            {% for page in site.pages %}
                {% if page.title == "return-policy" %}
                    {{ page.content }}
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<script type="text/javascript">

// MODAL

// modal trigger
var btn = document.getElementsByClassName("modal__trigger");
// close btn
var close = document.getElementsByClassName("close");

// When the user clicks on the button, open the modal
    for (var i = 0; i < btn.length; i++) {
        var thisBtn = btn[i];
            thisBtn.addEventListener("click", function(){
                var modal = document.getElementById(this.dataset.modal);
                modal.classList.add("contact--modal__active");
                modal.classList.remove("contact--modal__inactive");
            }, false);
    }
// // When the user clicks on <span> (x), close the modal
// close.onclick = function() {
// modal.classList.remove("contact--modal__active");
// }
for (var i = 0; i < close.length; i++) {
    var thisClose = close[i];
        thisClose.addEventListener("click", function(){
            var modal = document.getElementById(this.dataset.modal);
            modal.classList.add("contact--modal__inactive");
            modal.classList.remove("contact--modal__active");
        }, false);
        // modal.keyup(function(event){
        //     if (event.keyCode == 27){
        //        modal.classList.add("contact--modal__inactive");
        //        modal.classList.remove("contact--modal__active");
        //       }
        //   )};
}

// POST form data to zapier on submit

var $contactForm = $('#myForm');
    $contactForm.submit(function(e){
        e.preventDefault();
        $.ajax({
            url:'https://hooks.zapier.com/hooks/catch/2549310/84xxea/',
            type:'post',
            data:$contactForm.serialize(),
            beforeSend: function() {
                 $contactForm.append('<div class="alert alert--loading">Sending messageâ€¦</div>');
             },
             success: function(data) {
                 $contactForm.find('.alert--loading').hide();
                 $contactForm.append('<div class="alert alert--success">Message sent!</div>');
             },
             error: function(err) {
                 $contactForm.find('.alert--loading').hide();
                 $contactForm.append('<div class="alert alert--error">Ops, there was an error.</div>');
             }
     });
    });
</script>
